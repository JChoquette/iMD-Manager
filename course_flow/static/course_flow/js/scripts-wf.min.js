var workflow=function(t){"use strict";var e,n,l,s,o,i={},r=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function u(t,e){for(var n in e)t[n]=e[n];return t}function c(t){var e=t.parentNode;e&&e.removeChild(t)}function a(t,e,n){var l,s,o,i=arguments,r={};for(o in e)"key"==o?l=e[o]:"ref"==o?s=e[o]:r[o]=e[o];if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(i[o]);if(null!=n&&(r.children=n),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===r[o]&&(r[o]=t.defaultProps[o]);return d(t,r,l,s,null)}function d(t,n,l,s,o){var i={type:t,props:n,key:l,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o};return null==o&&(i.__v=i),null!=e.vnode&&e.vnode(i),i}function p(t){return t.children}function h(t,e){this.props=t,this.context=e}function f(t,e){if(null==e)return t.__?f(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?f(t):null}function y(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return y(t)}}function v(t){(!t.__d&&(t.__d=!0)&&n.push(t)&&!b.__r++||s!==e.debounceRendering)&&((s=e.debounceRendering)||l)(b)}function b(){for(var t;b.__r=n.length;)t=n.sort((function(t,e){return t.__v.__b-e.__v.__b})),n=[],t.some((function(t){var e,n,l,s,o,i,r;t.__d&&(i=(o=(e=t).__v).__e,(r=e.__P)&&(n=[],(l=u({},o)).__v=l,s=C(r,o,l,e.__n,void 0!==r.ownerSVGElement,null,n,null==i?f(o):i),N(n,o),s!=i&&y(o)))}))}function k(t,e,n,l,s,o,_,u,a,h){var y,v,b,k,m,w,x,S=l&&l.__k||r,N=S.length;for(a==i&&(a=null!=_?_[0]:N?f(l,0):null),n.__k=[],y=0;y<e.length;y++)if(null!=(k=n.__k[y]=null==(k=e[y])||"boolean"==typeof k?null:"string"==typeof k||"number"==typeof k?d(null,k,null,null,k):Array.isArray(k)?d(p,{children:k},null,null,null):null!=k.__e||null!=k.__c?d(k.type,k.props,k.key,null,k.__v):k)){if(k.__=n,k.__b=n.__b+1,null===(b=S[y])||b&&k.key==b.key&&k.type===b.type)S[y]=void 0;else for(v=0;v<N;v++){if((b=S[v])&&k.key==b.key&&k.type===b.type){S[v]=void 0;break}b=null}m=C(t,k,b=b||i,s,o,_,u,a,h),(v=k.ref)&&b.ref!=v&&(x||(x=[]),b.ref&&x.push(b.ref,null,k),x.push(v,k.__c||m,k)),null!=m?(null==w&&(w=m),a=g(t,k,b,S,_,m,a),h||"option"!=n.type?"function"==typeof n.type&&(n.__d=a):t.value=""):a&&b.__e==a&&a.parentNode!=t&&(a=f(b))}if(n.__e=w,null!=_&&"function"!=typeof n.type)for(y=_.length;y--;)null!=_[y]&&c(_[y]);for(y=N;y--;)null!=S[y]&&j(S[y],S[y]);if(x)for(y=0;y<x.length;y++)T(x[y],x[++y],x[++y])}function g(t,e,n,l,s,o,i){var r,_,u;if(void 0!==e.__d)r=e.__d,e.__d=void 0;else if(s==n||o!=i||null==o.parentNode)t:if(null==i||i.parentNode!==t)t.appendChild(o),r=null;else{for(_=i,u=0;(_=_.nextSibling)&&u<l.length;u+=2)if(_==o)break t;t.insertBefore(o,i),r=i}return void 0!==r?r:o.nextSibling}function m(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||_.test(e)?n:n+"px"}function w(t,e,n,l,s){var o,i;if(s&&"className"==e&&(e="class"),"style"===e)if("string"==typeof n)t.style=n;else{if("string"==typeof l&&(t.style=l=""),l)for(e in l)n&&e in n||m(t.style,e,"");if(n)for(e in n)l&&n[e]===l[e]||m(t.style,e,n[e])}else"o"===e[0]&&"n"===e[1]?(o=e!==(e=e.replace(/Capture$/,"")),(i=e.toLowerCase())in t&&(e=i),e=e.slice(2),t.l||(t.l={}),t.l[e]=n,n?l||t.addEventListener(e,x,o):t.removeEventListener(e,x,o)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&"download"!==e&&"href"!==e&&!s&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function x(t){this.l[t.type](e.event?e.event(t):t)}function S(t,e,n){var l,s;for(l=0;l<t.__k.length;l++)(s=t.__k[l])&&(s.__=t,s.__e&&("function"==typeof s.type&&s.__k.length>1&&S(s,e,n),e=g(n,s,s,t.__k,null,s.__e,e),"function"==typeof t.type&&(t.__d=e)))}function C(t,n,l,s,o,i,r,_,c){var a,d,f,y,v,b,g,m,w,x,C,N=n.type;if(void 0!==n.constructor)return null;(a=e.__b)&&a(n);try{t:if("function"==typeof N){if(m=n.props,w=(a=N.contextType)&&s[a.__c],x=a?w?w.props.value:a.__:s,l.__c?g=(d=n.__c=l.__c).__=d.__E:("prototype"in N&&N.prototype.render?n.__c=d=new N(m,x):(n.__c=d=new h(m,x),d.constructor=N,d.render=P),w&&w.sub(d),d.props=m,d.state||(d.state={}),d.context=x,d.__n=s,f=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=N.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=u({},d.__s)),u(d.__s,N.getDerivedStateFromProps(m,d.__s))),y=d.props,v=d.state,f)null==N.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==N.getDerivedStateFromProps&&m!==y&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(m,x),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(m,d.__s,x)||n.__v===l.__v){d.props=m,d.state=d.__s,n.__v!==l.__v&&(d.__d=!1),d.__v=n,n.__e=l.__e,n.__k=l.__k,d.__h.length&&r.push(d),S(n,_,t);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(m,d.__s,x),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(y,v,b)}))}d.context=x,d.props=m,d.state=d.__s,(a=e.__r)&&a(n),d.__d=!1,d.__v=n,d.__P=t,a=d.render(d.props,d.state,d.context),d.state=d.__s,null!=d.getChildContext&&(s=u(u({},s),d.getChildContext())),f||null==d.getSnapshotBeforeUpdate||(b=d.getSnapshotBeforeUpdate(y,v)),C=null!=a&&a.type==p&&null==a.key?a.props.children:a,k(t,Array.isArray(C)?C:[C],n,l,s,o,i,r,_,c),d.base=n.__e,d.__h.length&&r.push(d),g&&(d.__E=d.__=null),d.__e=!1}else null==i&&n.__v===l.__v?(n.__k=l.__k,n.__e=l.__e):n.__e=D(l.__e,n,l,s,o,i,r,c);(a=e.diffed)&&a(n)}catch(t){n.__v=null,e.__e(t,n,l)}return n.__e}function N(t,n){e.__c&&e.__c(n,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(t){t.call(n)}))}catch(t){e.__e(t,n.__v)}}))}function D(t,e,n,l,s,o,_,u){var c,a,d,p,h,f=n.props,y=e.props;if(s="svg"===e.type||s,null!=o)for(c=0;c<o.length;c++)if(null!=(a=o[c])&&((null===e.type?3===a.nodeType:a.localName===e.type)||t==a)){t=a,o[c]=null;break}if(null==t){if(null===e.type)return document.createTextNode(y);t=s?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,y.is&&{is:y.is}),o=null,u=!1}if(null===e.type)f!==y&&t.data!==y&&(t.data=y);else{if(null!=o&&(o=r.slice.call(t.childNodes)),d=(f=n.props||i).dangerouslySetInnerHTML,p=y.dangerouslySetInnerHTML,!u){if(null!=o)for(f={},h=0;h<t.attributes.length;h++)f[t.attributes[h].name]=t.attributes[h].value;(p||d)&&(p&&d&&p.__html==d.__html||(t.innerHTML=p&&p.__html||""))}(function(t,e,n,l,s){var o;for(o in n)"children"===o||"key"===o||o in e||w(t,o,null,n[o],l);for(o in e)s&&"function"!=typeof e[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===e[o]||w(t,o,e[o],n[o],l)})(t,y,f,s,u),p?e.__k=[]:(c=e.props.children,k(t,Array.isArray(c)?c:[c],e,n,l,"foreignObject"!==e.type&&s,o,_,i,u)),u||("value"in y&&void 0!==(c=y.value)&&c!==t.value&&w(t,"value",c,f.value,!1),"checked"in y&&void 0!==(c=y.checked)&&c!==t.checked&&w(t,"checked",c,f.checked,!1))}return t}function T(t,n,l){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,l)}}function j(t,n,l){var s,o,i;if(e.unmount&&e.unmount(t),(s=t.ref)&&(s.current&&s.current!==t.__e||T(s,null,n)),l||"function"==typeof t.type||(l=null!=(o=t.__e)),t.__e=t.__d=void 0,null!=(s=t.__c)){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(t){e.__e(t,n)}s.base=s.__P=null}if(s=t.__k)for(i=0;i<s.length;i++)s[i]&&j(s[i],n,l);null!=o&&c(o)}function P(t,e,n){return this.constructor(t,n)}e={__e:function(t,e){for(var n,l;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(l=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(l=!0,n.componentDidCatch(t)),l)return v(n.__E=n)}catch(e){t=e}throw t}},h.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=u({},this.state),"function"==typeof t&&(t=t(u({},n),this.props)),t&&u(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),v(this))},h.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),v(this))},h.prototype.render=p,n=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,b.__r=0,o=i;class I extends h{constructor(t){super(t),console.log(t)}componentDidMount(){this.updateJSON()}updateJSON(){var t=this.setState.bind(this);$.getJSON("/"+this.objectType+"/read/"+this.props.objectID,(function(e){t(e)}))}setJSON(t,e){if(this.state[t]!=e){var n={};n[t]=e,this.setState(n,()=>updateValue(this.props.objectID,this.objectType,this.state))}}addDeleteSelf(t=this.state.id,e=this.objectType){return a(J,{handleClick:deleteSelf.bind(this,t,e,this.props.updateParent)})}addInsertSibling(t=this.state.id,e=this.props.parentID,n=this.objectType){return a(A,{handleClick:insertSibling.bind(this,t,n,e,this.props.updateParent)})}}function U(t){return a("p",null,t.text)}class O extends h{constructor(t){super(t),this.updateText=this.updateText.bind(this)}render(){return a("input",{value:this.props.text,onBlur:this.updateText})}updateText(t){this.props.textUpdated(t.target.value)}}class J extends h{constructor(t){super(t),this.handleClick=this.handleClick.bind(this)}render(){return a("button",{class:"delete-self-button",onClick:this.handleClick},"x")}handleClick(t){console.log(t),this.props.handleClick(t)}}class A extends h{constructor(t){super(t),this.handleClick=this.handleClick.bind(this)}render(){return a("button",{class:"insert-sibling-button",onClick:this.handleClick},"+")}handleClick(t){console.log(t),this.props.handleClick(t)}}class E extends I{constructor(t){super(t),this.objectType="node"}render(){if(this.state.id)return a("div",{class:"node"},a(O,{text:this.state.title,textUpdated:this.setJSON.bind(this,"title")}),a(O,{text:this.state.description,textUpdated:this.setJSON.bind(this,"description")}))}}class W extends I{constructor(t){super(t),this.objectType="nodestrategy"}render(){if(this.state.id)return a(E,{objectID:this.state.node})}}class V extends I{constructor(t){super(t),this.objectType="strategy"}render(){if(this.state.id){var t=this.state.nodestrategy_set.map(t=>a(W,{objectID:t,parentID:this.state.id,updateParent:this.updateJSON.bind(this)}));return a("div",{class:"strategy"},a(O,{text:this.state.title,textUpdated:this.setJSON.bind(this,"title")}),a(O,{text:this.state.description,textUpdated:this.setJSON.bind(this,"description")}),a("div",null,t))}}}class L extends I{constructor(t){super(t),this.objectType="column"}render(){if(this.state.id){console.log(this.state);var t=this.state.title;return t||(t=this.state.column_type_display),a("div",{class:"column"},t)}}}class M extends I{constructor(t){super(t),this.objectType="columnworkflow"}render(){if(this.state.id)return a("div",{class:"column-workflow"},a(L,{objectID:this.state.column}),this.addDeleteSelf(this.state.column,"column"))}}class B extends I{constructor(t){super(t),this.objectType="strategyworkflow"}render(){if(console.log(this.state),this.state.id)return a("div",{class:"strategy-workflow"},a(V,{objectID:this.state.strategy}),this.addDeleteSelf(this.state.strategy,"strategy"),this.addInsertSibling())}}class F extends I{constructor(t){super(t),this.objectType=t.type}render(){if(console.log(this.state),this.state.id){var t=this.state.columnworkflow_set.map(t=>a(M,{objectID:t,parentID:this.state.id,updateParent:this.updateJSON.bind(this)})),e=this.state.strategyworkflow_set.map(t=>a(B,{objectID:t,parentID:this.state.id,updateParent:this.updateJSON.bind(this)}));return a("div",{id:"workflow-wrapper",class:"workflow-wrapper"},a("div",{class:"workflow-container"},a(O,{text:this.state.title,textUpdated:this.setJSON.bind(this,"title")}),a(U,{text:"Created by "+this.state.author}),a(O,{text:this.state.description,textUpdated:this.setJSON.bind(this,"description")}),a("button",{onClick:()=>newColumn(this.state.id,0,this.updateJSON.bind(this))},"Add A Column"),a("div",{class:"column-row"},t),a("div",{class:"strategy-block"},e)))}}}return t.ClickEditText=O,t.ColumnView=L,t.ColumnWorkflowView=M,t.ComponentJSON=I,t.DeleteSelfButton=J,t.InsertSiblingButton=A,t.NodeStrategyView=W,t.NodeView=E,t.StrategyView=V,t.StrategyWorkflowView=B,t.Text=U,t.WorkflowView=F,t.renderWorkflowView=function(t,n){console.log(t),function(t,n,l){var s,_,u;e.__&&e.__(t,n),_=(s=l===o)?null:l&&l.__k||n.__k,t=a(p,null,[t]),u=[],C(n,(s?n:l||n).__k=t,_||i,i,void 0!==n.ownerSVGElement,l&&!s?[l]:_?null:n.childNodes.length?r.slice.call(n.childNodes):null,u,l||i,s),N(u,t)}(a(F,{objectID:t.id,type:t.type}),n)},t}({});
