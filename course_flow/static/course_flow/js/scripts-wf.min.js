var workflow=function(e){"use strict";var t,n,l,o,_,r={},i=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function u(e,t){for(var n in t)e[n]=t[n];return e}function c(e){var t=e.parentNode;t&&t.removeChild(e)}function a(e,t,n){var l,o,_,r=arguments,i={};for(_ in t)"key"==_?l=t[_]:"ref"==_?o=t[_]:i[_]=t[_];if(arguments.length>3)for(n=[n],_=3;_<arguments.length;_++)n.push(r[_]);if(null!=n&&(i.children=n),"function"==typeof e&&null!=e.defaultProps)for(_ in e.defaultProps)void 0===i[_]&&(i[_]=e.defaultProps[_]);return p(e,i,l,o,null)}function p(e,n,l,o,_){var r={type:e,props:n,key:l,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:_};return null==_&&(r.__v=r),null!=t.vnode&&t.vnode(r),r}function f(e){return e.children}function d(e,t){this.props=e,this.context=t}function h(e,t){if(null==t)return e.__?h(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?h(e):null}function v(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return v(e)}}function y(e){(!e.__d&&(e.__d=!0)&&n.push(e)&&!g.__r++||o!==t.debounceRendering)&&((o=t.debounceRendering)||l)(g)}function g(){for(var e;g.__r=n.length;)e=n.sort((function(e,t){return e.__v.__b-t.__v.__b})),n=[],e.some((function(e){var t,n,l,o,_,r,i;e.__d&&(r=(_=(t=e).__v).__e,(i=t.__P)&&(n=[],(l=u({},_)).__v=l,o=C(i,_,l,t.__n,void 0!==i.ownerSVGElement,null,n,null==r?h(_):r),N(n,_),o!=r&&v(_)))}))}function m(e,t,n,l,o,_,s,u,a,d){var v,y,g,m,w,b,x,S=l&&l.__k||i,N=S.length;for(a==r&&(a=null!=s?s[0]:N?h(l,0):null),n.__k=[],v=0;v<t.length;v++)if(null!=(m=n.__k[v]=null==(m=t[v])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m?p(null,m,null,null,m):Array.isArray(m)?p(f,{children:m},null,null,null):null!=m.__e||null!=m.__c?p(m.type,m.props,m.key,null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(g=S[v])||g&&m.key==g.key&&m.type===g.type)S[v]=void 0;else for(y=0;y<N;y++){if((g=S[y])&&m.key==g.key&&m.type===g.type){S[y]=void 0;break}g=null}w=C(e,m,g=g||r,o,_,s,u,a,d),(y=m.ref)&&g.ref!=y&&(x||(x=[]),g.ref&&x.push(g.ref,null,m),x.push(y,m.__c||w,m)),null!=w?(null==b&&(b=w),a=k(e,m,g,S,s,w,a),d||"option"!=n.type?"function"==typeof n.type&&(n.__d=a):e.value=""):a&&g.__e==a&&a.parentNode!=e&&(a=h(g))}if(n.__e=b,null!=s&&"function"!=typeof n.type)for(v=s.length;v--;)null!=s[v]&&c(s[v]);for(v=N;v--;)null!=S[v]&&U(S[v],S[v]);if(x)for(v=0;v<x.length;v++)T(x[v],x[++v],x[++v])}function k(e,t,n,l,o,_,r){var i,s,u;if(void 0!==t.__d)i=t.__d,t.__d=void 0;else if(o==n||_!=r||null==_.parentNode)e:if(null==r||r.parentNode!==e)e.appendChild(_),i=null;else{for(s=r,u=0;(s=s.nextSibling)&&u<l.length;u+=2)if(s==_)break e;e.insertBefore(_,r),i=r}return void 0!==i?i:_.nextSibling}function w(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||s.test(t)?n:n+"px"}function b(e,t,n,l,o){var _,r;if(o&&"className"==t&&(t="class"),"style"===t)if("string"==typeof n)e.style=n;else{if("string"==typeof l&&(e.style=l=""),l)for(t in l)n&&t in n||w(e.style,t,"");if(n)for(t in n)l&&n[t]===l[t]||w(e.style,t,n[t])}else"o"===t[0]&&"n"===t[1]?(_=t!==(t=t.replace(/Capture$/,"")),(r=t.toLowerCase())in e&&(t=r),t=t.slice(2),e.l||(e.l={}),e.l[t]=n,n?l||e.addEventListener(t,x,_):e.removeEventListener(t,x,_)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&"size"!==t&&"download"!==t&&"href"!==t&&!o&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(t)?e.removeAttribute(t):e.setAttribute(t,n))}function x(e){this.l[e.type](t.event?t.event(e):e)}function S(e,t,n){var l,o;for(l=0;l<e.__k.length;l++)(o=e.__k[l])&&(o.__=e,o.__e&&("function"==typeof o.type&&o.__k.length>1&&S(o,t,n),t=k(n,o,o,e.__k,null,o.__e,t),"function"==typeof e.type&&(e.__d=t)))}function C(e,n,l,o,_,r,i,s,c){var a,p,h,v,y,g,k,w,b,x,C,N=n.type;if(void 0!==n.constructor)return null;(a=t.__b)&&a(n);try{e:if("function"==typeof N){if(w=n.props,b=(a=N.contextType)&&o[a.__c],x=a?b?b.props.value:a.__:o,l.__c?k=(p=n.__c=l.__c).__=p.__E:("prototype"in N&&N.prototype.render?n.__c=p=new N(w,x):(n.__c=p=new d(w,x),p.constructor=N,p.render=D),b&&b.sub(p),p.props=w,p.state||(p.state={}),p.context=x,p.__n=o,h=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=N.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=u({},p.__s)),u(p.__s,N.getDerivedStateFromProps(w,p.__s))),v=p.props,y=p.state,h)null==N.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==N.getDerivedStateFromProps&&w!==v&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(w,x),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(w,p.__s,x)||n.__v===l.__v){p.props=w,p.state=p.__s,n.__v!==l.__v&&(p.__d=!1),p.__v=n,n.__e=l.__e,n.__k=l.__k,p.__h.length&&i.push(p),S(n,s,e);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(w,p.__s,x),null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(v,y,g)}))}p.context=x,p.props=w,p.state=p.__s,(a=t.__r)&&a(n),p.__d=!1,p.__v=n,p.__P=e,a=p.render(p.props,p.state,p.context),p.state=p.__s,null!=p.getChildContext&&(o=u(u({},o),p.getChildContext())),h||null==p.getSnapshotBeforeUpdate||(g=p.getSnapshotBeforeUpdate(v,y)),C=null!=a&&a.type==f&&null==a.key?a.props.children:a,m(e,Array.isArray(C)?C:[C],n,l,o,_,r,i,s,c),p.base=n.__e,p.__h.length&&i.push(p),k&&(p.__E=p.__=null),p.__e=!1}else null==r&&n.__v===l.__v?(n.__k=l.__k,n.__e=l.__e):n.__e=P(l.__e,n,l,o,_,r,i,c);(a=t.diffed)&&a(n)}catch(e){n.__v=null,t.__e(e,n,l)}return n.__e}function N(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function P(e,t,n,l,o,_,s,u){var c,a,p,f,d,h=n.props,v=t.props;if(o="svg"===t.type||o,null!=_)for(c=0;c<_.length;c++)if(null!=(a=_[c])&&((null===t.type?3===a.nodeType:a.localName===t.type)||e==a)){e=a,_[c]=null;break}if(null==e){if(null===t.type)return document.createTextNode(v);e=o?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type,v.is&&{is:v.is}),_=null,u=!1}if(null===t.type)h!==v&&e.data!==v&&(e.data=v);else{if(null!=_&&(_=i.slice.call(e.childNodes)),p=(h=n.props||r).dangerouslySetInnerHTML,f=v.dangerouslySetInnerHTML,!u){if(null!=_)for(h={},d=0;d<e.attributes.length;d++)h[e.attributes[d].name]=e.attributes[d].value;(f||p)&&(f&&p&&f.__html==p.__html||(e.innerHTML=f&&f.__html||""))}(function(e,t,n,l,o){var _;for(_ in n)"children"===_||"key"===_||_ in t||b(e,_,null,n[_],l);for(_ in t)o&&"function"!=typeof t[_]||"children"===_||"key"===_||"value"===_||"checked"===_||n[_]===t[_]||b(e,_,t[_],n[_],l)})(e,v,h,o,u),f?t.__k=[]:(c=t.props.children,m(e,Array.isArray(c)?c:[c],t,n,l,"foreignObject"!==t.type&&o,_,s,r,u)),u||("value"in v&&void 0!==(c=v.value)&&c!==e.value&&b(e,"value",c,h.value,!1),"checked"in v&&void 0!==(c=v.checked)&&c!==e.checked&&b(e,"checked",c,h.checked,!1))}return e}function T(e,n,l){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,l)}}function U(e,n,l){var o,_,r;if(t.unmount&&t.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||T(o,null,n)),l||"function"==typeof e.type||(l=null!=(_=e.__e)),e.__e=e.__d=void 0,null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){t.__e(e,n)}o.base=o.__P=null}if(o=e.__k)for(r=0;r<o.length;r++)o[r]&&U(o[r],n,l);null!=_&&c(_)}function D(e,t,n){return this.constructor(e,n)}t={__e:function(e,t){for(var n,l;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(l=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(l=!0,n.componentDidCatch(e)),l)return y(n.__E=n)}catch(t){e=t}throw e}},d.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=u({},this.state),"function"==typeof e&&(e=e(u({},n),this.props)),e&&u(n,e),null!=e&&this.__v&&(t&&this.__h.push(t),y(this))},d.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),y(this))},d.prototype.render=f,n=[],l="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,_=r;class E extends d{constructor(e){super(e),this.json=e.json,this.state=this.json}setJSON(e){!function e(t,n){for(var l in console.log(t),console.log(n),n)console.log(l),"object"==typeof t[l]&&null!=t[l]?e(t[l],n[l]):t[l]=n[l]}(this.json,e),this.setState(e)}}function j(e){return a("p",null,e.text)}class A extends d{constructor(e){super(e),this.updateText=this.updateText.bind(this)}render(){return a("input",{value:this.props.text,onBlur:this.updateText})}updateText(e){console.log(this),console.log("Updating text"),console.log(e.target.value),this.props.textUpdated(e.target.value)}}class W extends E{render(){return a("div",{class:"node"},a(A,{text:this.state.node.title}))}}class L extends E{render(){return a("div",{class:"column"},this.state.column.title)}}class M extends E{render(){console.log(this.state);var e=this.state.strategy.nodestrategy_set.map(e=>a(W,{json:e}));return a("div",{class:"strategy"},this.state.strategy.title,a("div",null,e))}}class V extends E{titleChanged(e){console.log("The new title is: "+e),this.setState({title:e}),console.log(this.state)}render(){console.log(this.state);var e=this.state.columnworkflow_set.map(e=>a(L,{json:e})),t=this.state.strategyworkflow_set.map(e=>a(M,{json:e}));return a("div",{id:"workflow-wrapper",class:"workflow-wrapper"},a("div",{class:"workflow-container"},a(A,{text:this.state.title,textUpdated:this.titleChanged.bind(this)}),a(j,{text:"Created by "+this.state.author}),a(A,{text:this.state.description}),a("div",{class:"column-row"},e),a("div",{class:"strategy-block"},t)))}}return e.ClickEditText=A,e.ColumnView=L,e.ComponentJSON=E,e.NodeView=W,e.StrategyView=M,e.Text=j,e.WorkflowView=V,e.renderWorkflowView=function(e,n){!function(e,n,l){var o,s,u;t.__&&t.__(e,n),s=(o=l===_)?null:l&&l.__k||n.__k,e=a(f,null,[e]),u=[],C(n,(o?n:l||n).__k=e,s||r,r,void 0!==n.ownerSVGElement,l&&!o?[l]:s?null:n.childNodes.length?i.slice.call(n.childNodes):null,u,l||r,o),N(u,e)}(a(V,{json:e}),n)},e}({});
