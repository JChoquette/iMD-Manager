
{% extends "course_flow/base.html" %}
<!-- -->
{% load static compress i18n %} {% get_current_language as LANGUAGE_CODE %}
<!-- -->
{% load static i18n %}
<!-- -->
{% block title %}{% endblock %}
<!-- -->
{% block metadescription %} {% endblock %}
<!-- -->
{% block header %}{% endblock %}
<!-- -->
{% block body %}

<div id=container class="body-wrapper"></div>
<div id="node-form-container"></div>

{% endblock %}
<!-- -->
{% block foot %} {% endblock %}
<!-- -->
{% csrf_token %}
<!-- -->
{% block scripts %}

<script nonce="{{request.csp_nonce}}">
window.addEventListener("load", function(){
    
    
    let fetchThenRenderWorkflow = function(){
        $.getJSON('{% url "course_flow:workflow-detail" pk=object.pk %}',
            function(json){
                workflow.renderWorkflowView(json,$("#container").get()[0]);
            }
        );
    }
    
    fetchThenRenderWorkflow();
    
})


function updateValue(objectID,objectType,json){
    console.log("trying to update value:");
    console.log(objectID);
    console.log(objectType);
    console.log(json);
    $.post("{% url 'course_flow:update-value' %}", {
        objectID:JSON.stringify(objectID),
        objectType:JSON.stringify(objectType),
        data:JSON.stringify(json)
    }).done(function(data){
        if(data.action == "posted") console.log("Success");
        else console.log("Failed");
    });
}









</script>

{% endblock %}